# spring-boot-transaction

# 事务传播行为

一个事务方法B被另外一个方法A调用时，事务方法B需要考虑事务传播行为，也就是要站在事务方法B的角度看事务的传播行为。

- 事务方法B是默认传播行为，也就是REQUIRED：当方法A调用方法B时，如果方法A没有事务，则事务方法B新建一个事务运行；如果方法A有事务，则事务方法B加入到方法A的事务中运行。
- 事务方法B是REQUIRES_NEW：当方法A调用方法B时，如果方法A没有事务，则事务方法B新建一个事务运行；如果方法A有事务，则会现将方法A的事务挂起，方法B新建一个事务运行。
- 事务方法B是SUPPORTS：当方法A调用方法B时，如果方法A没有事务，则事务方法B也以非事务方式运行；如果方法A有事务，则事务方法B加入到方法A的事务中运行。
- 事务方法B是MANDATORY：当方法A调用方法B时，如果方法A没有事务，则抛异常；如果方法A有事务，则事务方法B加入到方法A的事务中运行。
- 事务方法B是NOT_SUPPORT：当方法A调用方法B时，如果方法A没有事务，则事务方法B也以非事务方式运行；如果方法A有事务，则事务方法B也以非事务方式运行。
- 事务方法B是NEVER：当方法A调用方法B时，如果方法A没有事务，则事务方法B也以非事务方式运行；如果方法A有事务，则抛异常。
- 事务方法B是NESTED：当方法A调用方法B时，如果方法A没有事务，则事务方法B新建一个事务运行；如果方法A有事务，则事务方法B运行在一个嵌套的事务中，也就是事务方法B的事务是一个子事务，运行在外层的事务方法A的事务中，B方法的子事务有单独的保存点，B方法抛异常时，不会影响到外部A方法的事务，但是外部A方法事务失败时会回滚内层B方法的事务。